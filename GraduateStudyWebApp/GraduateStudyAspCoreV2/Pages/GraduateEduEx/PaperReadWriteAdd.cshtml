@page
@model GraduateStudyWebApp.Pages.GraduateEduEx.PaperReadWriteAddModel
@{
    //Layout = "~/Pages/Shared/_Layout_RequireJS.cshtml";
    Layout = "~/Pages/Shared/_Layout_PC.cshtml";
    ViewData["Title"] = "论文表维护";
    //操作Session样例，方法1：
    //Model.seUserId = "TestUserId";
    var strUserId_Value = Model.seUserId;
    //操作Session样例，方法2：
    Model.SetSession("UserId1", "TestUserId1");
    var strUserId1_Value = Model.GetSession("UserId1");
    //请参见页尾的隐形控件hidUserid和hidUserId1的使用。
}
@section Styles{
    <link rel="stylesheet" href="../lib/bootstrap/dist/css/bootstrap.css" />
    <link rel="stylesheet" href="../css/site.css" />

    <link rel="stylesheet" href="~/lib/Xadmin/css/font.css">
    <link rel="stylesheet" href="~/lib/Xadmin/css/xadmin.css">
    <!-- <link rel="stylesheet" href="./css/theme5.css"> -->


    <link rel="stylesheet" href="~/css/public.css" />
}
@section Scripts{
    <script src="~/lib/Xadmin/lib/layui/layui.js" charset="utf-8"></script>
    <script type="text/javascript" src="~/lib/Xadmin/js/xadmin.js"></script>
    <script src="../lib/jquery/dist/jquery.js"></script>
    <script src="../lib/bootstrap/dist/js/bootstrap.js"></script>
    @*<script src="../js/site.js" asp-append-version="true"></script>*@
    <script src="../lib/bootstrap/dist/js/popper.js" type="module"></script>

    <script src="../lib/require/require.js" data-main="../js/src/config"></script>
}
<script>

var strUrl_Session_SetString = "@Model.Url_Session_SetString";
var strUrl_Session_GetString = "@Model.Url_Session_GetString";
        var strCurrPrjId = "@Model.CurrPrjId";


    function GetRequest() {
        var url = location.search; //获取url中"?"符后的字串
        var theRequest = new Object();
        if (url.indexOf("?") != -1) {
            var str = url.substr(1);
            strs = str.split("&");
            for (var i = 0; i < strs.length; i++) {
                theRequest[strs[i].split("=")[0]] = unescape(strs[i].split("=")[1]);
            }
        }
        return theRequest;
    }
    function GetReadWriteTypeId() {
        var Request = new Object();
        Request = GetRequest();
        var str1;
        str1 = Request['ReadWriteTypeId'];

        if (str1 != null) {
            $("#hidReadWriteTypeId").val(str1);

            require(["../js/GraduateEduEx/PaperReadWriteAdd.js"], function (paper) {
                var objPage = new paper.PaperReadWriteAdd();
                objPage.Page_Load();
            });

        }
        else {
            require(["../js/GraduateEduEx/PaperReadWriteAdd.js"], function (paper) {
                var objPage = new paper.PaperReadWriteAdd();
                objPage.Page_Load();
            });
        }
    }
    /*
页面导入-在导入页面后运行的函数
(AutoGCLib.WA_ViewScript_TS4CSharp:Gen_WApi_JS_Page_Load)
*/
    window.onload = function () {
        //require(["../js/GraduateEduEx/PaperReadWrite_QUDI_TSEx.js"], function (paperreadwrite) {
        //    var objPage = new paperreadwrite.PaperReadWrite_QUDI_TSEx();
        //    objPage.Page_Load();
        //});

        GetReadWriteTypeId();
        //显示隐藏；
        changeblock();
    }

//    /*
// 页面导入-在导入页面后运行的函数
//(AutoGCLib.WA_ViewScript_TS4CSharp:Gen_WApi_JS_Page_Load)
//*/
//    window.onload = function () {
//        require(["../js/GraduateEduEx/PaperReadWriteAdd.js"], function (paper) {
//            var objPage = new paper.PaperReadWriteAdd();
//            objPage.Page_Load();
//        });
//    }

    function CloseWindow() {

        try {
            window.parent.btnQuery_Click();
            var index = parent.layer.getFrameIndex(window.name); //先得到当前iframe层的索引
            parent.layer.close(index); //再执行关闭

          
           
        }
        catch (e) {
            window.opener.location = "父页面地址";
            window.opener = null;

            window.close();
        }
    }

    /*
     查询记录
    (AutoGCLib.WA_ViewScript_TS4CSharp:Gen_WApi_JS_btnQuery_Click)
    */
    function btnQuery_Click() {
        require(["../js/GraduateEduEx/PaperReadWriteAdd.js"], function (paper) {
            $("#Text1").val("进入函数：btnQuery_Click");
            var objPage = new paper.PaperReadWriteAdd();
            objPage.btnQuery_Click();
        });
    }

    //点击确定选择论文按钮
    function btnokRecord_Click() {
        require(["../js/GraduateEduEx/PaperReadWriteAdd.js", "../js/TS/PubFun/clsCommonFunc4Web.js"], function (paper, commonfunc) {
            var strKeyId = commonfunc.clsCommonFunc4Web.GetFirstCheckedKeyId('divList');
            if (strKeyId == "") {
                alert("请选择一篇论文！");
                return;
            }
            $("#hidPaperId").val(strKeyId);
            //显示隐藏；
            changeblock();
      
        });
    }
    var isbool = true;
    function changeblock() {

        //控制显示隐藏
        if (isbool == true) {
            document.getElementById('tabLayout').style.display = 'block';
            document.getElementById('pageTwo').style.display = 'none';
            //this.value = "显示";
            isbool = false;
        } else {

            isbool = true;
            document.getElementById('tabLayout').style.display = 'none';
            document.getElementById('pageTwo').style.display = 'block';
            //this.value = "隐藏";
        }
    }

    /*
 提交编辑
(AutoGCLib.WA_ViewScript_TS4CSharp:Gen_WApi_JS_mySubmit)
*/
    function mySubmit(pstrOp) {
        $("#btnOKUpd").attr("disabled", true);
        //    alert("提交" + strOp);
        require(["../js/GraduateEduEx/PaperReadWriteAdd.js"], function (paperreadwrite) {
            var objPage = new paperreadwrite.PaperReadWriteAdd();
            objPage.btnOKUpd_Click();
        });
    }


    /*
    修改记录
   (AutoGCLib.WA_ViewScript_TS4CSharp:Gen_WApi_JS_IndexPage)
   */
    function IndexPage(intPageIndex) {
        console.log("跳转到" + intPageIndex + "页");
        require(["../js/GraduateEduEx/PaperReadWriteAdd.js"], function (paper) {
            var objPage = new paper.PaperReadWriteAdd();
            objPage.IndexPage(intPageIndex);
        });
    }

    /*
     修改记录
    (AutoGCLib.WA_ViewScript_TS4CSharp:Gen_WApi_JS_JumpToPage)
    */
    function JumpToPage() {
        var intCurrPageIndex = $('#input_number').val();
        var intPageIndex = Number(intCurrPageIndex);
        console.log("跳转到" + intPageIndex + "页");
        require(["../js/GraduateEduEx/PaperReadWriteAdd.js"], function (paper) {
            var objPage = new paper.PaperReadWriteAdd();
            objPage.IndexPage(intPageIndex);
        });
    }


    /*
     修改记录
    (AutoGCLib.WA_ViewScript_TS4CSharp:Gen_WApi_JS_NextPage)
    */
    function NextPage() {
        var intCurrPageIndex = $('#hidCurrPageIndex').val();
        var intPageIndex = Number(intCurrPageIndex) + 1;
        console.log("跳转到" + intPageIndex + "页");
        require(["../js/GraduateEduEx/PaperReadWriteAdd.js"], function (paper) {
            var objPage = new paper.PaperReadWriteAdd();
            objPage.IndexPage(intPageIndex);
        });
    }


    /*
     修改记录
    (AutoGCLib.WA_ViewScript_TS4CSharp:Gen_WApi_JS_PageNum)
    */
    function PageNum(intPageIndex) {
        console.log("跳转到" + intPageIndex + "页");
        require(["../js/GraduateEduEx/PaperReadWriteAdd.js"], function (paper) {
            var objPage = new paper.PaperReadWriteAdd();
            objPage.IndexPage(intPageIndex);
        });
    }

    /*
     修改记录
    (AutoGCLib.WA_ViewScript_TS4CSharp:Gen_WApi_JS_PrevPage)
    */
    function PrevPage() {
        var intCurrPageIndex = $('#hidCurrPageIndex').val();
        var intPageIndex = Number(intCurrPageIndex) - 1;
        console.log("跳转到" + intPageIndex + "页");
        require(["../js/GraduateEduEx/PaperReadWriteAdd.js"], function (paper) {
            var objPage = new paper.PaperReadWriteAdd();
            objPage.IndexPage(intPageIndex);
        });
    }
</script>


<div id="divLoading" class="loading">
    <img src="~/images/CirclePoint.gif" />
</div>
<div id="tabLayout" class="tab_layout">
    @*-- 标题层 --*@

    <div class="x-nav">
        <span class="layui-breadcrumb">
            <a href="">首页</a>
            <a href="">主题研究管理</a>
            <a>
                <cite> 论文读写添加</cite>
            </a>
            <Label id="lblMsg_List" name="lblMsg_List"></Label>
        </span>
        <a class="layui-btn layui-btn-small" style="line-height:1.6em;margin-top:3px;float:right" onclick="location.reload()" title="刷新">
            <i class="layui-icon layui-icon-refresh" style="line-height:30px"></i>
        </a>
    </div>
    @*-- 查询层 --*@

    <div id="divQuery" class="div_query">
        <table id="tabQuery" name="tabQuery" style="width: 70%; " class="table table-bordered table-hover table td table-sm">
            <tr>
                <td>
                    <Label id="lblPaperTitle_q" name="lblPaperTitle_q" class="col-form-label text-right" style="width:80px;width:90px;">
                        论文标题
                    </Label>
                </td>
                <td>
                    <input id="txtPaperTitle_q" name="txtPaperTitle_q" class="form-control" style="width:200px;" />
                </td>
                
                <td class="NameTD">
                    <Label id="lblLiteratureTypeId_q" name="lblLiteratureTypeId_q" class="col-form-label text-right" style="width:90px;">
                        文献类型
                    </Label>
                </td>
                <td class="ValueTD">
                    <select id="ddlLiteratureTypeId_q" name="ddlLiteratureTypeId_q" class="form-control" style="width:200px;" />
                </td>
                <td>
                    <button type="submit" id="btnQuery" name="btnQuery" class="btn btn-outline-warning text-nowrap btn-sm" onclick="btnQuery_Click()">查询</button>
                </td>
                @*<td>
                        <span class="form-control" style="width:200px;">
                            <input type="checkbox" id="chkIsChecked_q" name="chkIsChecked_q" Text="是否检查"><label for="chkIsChecked_q">是否检查</label>
                        </span>
                    </td>
                    <td>
                        <span class="form-control" style="width:200px;">
                            <input type="checkbox" id="chkIsQuotethesis_q" name="chkIsQuotethesis_q" Text="是否引用论文"><label for="chkIsQuotethesis_q">是否引用论文</label>
                        </span>
                    </td>*@
            </tr>
            <tr></tr>
        </table>
    </div>
    @*-- 功能区 --*@

    <div id="divFunction" class="table table-bordered table-hover">
        <ul class="nav">
            <li class="nav-item">
                <Label id="lblPaperList" name="lblPaperList" class="col-form-label text-info" style="width:250px;">
                    论文表列表
                </Label>
            </li>
            <li class="nav-item ml-3">
                <a href="javascript:history.back(-1)" class="btn btn-outline-info text-nowrap btn-sm">返回</a>
            </li>
            <li class="nav-item ml-3">
                <button id="btnokRecord" name="btnokRecord" class="btn btn-outline-info text-nowrap btn-sm" onclick="btnokRecord_Click()">确定选择</button>
            </li>

        </ul>
    </div>
    @*-- 列表层 --*@
    <div id="divList" class="div_List">
        <div id="divDataLst" class="div_List">
        </div>
        <div id="divPager" class="pager" value="1">
           
        </div>
    </div>



</div>


<div id="pageTwo">

    <div id="divList" class="div_List">
        <div id="divDataLst" class="div_List">
            <div class="modal-content" style="width: 100%;">
                <div class="modal-header">
                    <h4 class="modal-title" id="myModalLabel"></h4>
                    @*<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>*@
                </div>
                <div class="modal-body">
                    <table id="tabwucPaperReadWrite" name="tabwucPaperReadWrite" style="width: 100%; padding: 1px; border:0px" class="table table-bordered table-hover">
                        <tr style="display:none;">
                            <td class="NameTD" style="width:10%;">
                                <Label id="lblPaperRWId" name="lblPaperRWId" class="col-form-label text-right" style="width:90px;">
                                    论文读写Id
                                </Label>
                            </td>
                            <td class="ValueTD">
                                <input id="txtPaperRWId" name="txtPaperRWId" class="form-control" style="width:200px;" />
                            </td>

                        </tr>
                        @*<tr>
                                <td class="NameTD">
                                    <Label id="lblReaderId" name="lblReaderId" class="col-form-label text-right" style="width:90px;">
                                        阅读者Id
                                    </Label>
                                </td>
                                <td class="ValueTD">
                                    <input id="txtReaderId" name="txtReaderId" class="form-control" style="width:200px;" />
                                </td>

                            </tr>*@
                        @*<tr>
                                <td class="NameTD">
                                    <Label id="lblPaperId" name="lblPaperId" class="col-form-label text-right" style="width:90px;">
                                        论文Id
                                    </Label>
                                </td>
                                <td class="ValueTD">
                                    <select id="ddlPaperId" name="ddlPaperId" class="form-control" style="width:200px;" />
                                </td>

                            </tr>*@
                        <tr>
                            <td class="NameTD" style="width:10%;">
                                <Label id="lblResearchQuestion" name="lblResearchQuestion" class="col-form-label text-right" style="width:90px;">
                                    研究问题
                                </Label>
                            </td>
                            <td class="ValueTD">
                                <input id="txtResearchQuestion" name="txtResearchQuestion" class="form-control" style="width:350px;" />
                            </td>

                        </tr>
                        <tr>
                            <td class="NameTD"></td>
                            <td class="ValueTD">
                                <span class="form-control" style="width:200px;">
                                    <input type="checkbox" id="chkIsPublic" name="chkIsPublic" Text="是否公开" checked="checked"><label for="chkIsPublic">是否公开</label>
                                </span>
                            </td>

                        </tr>
                        <tr>
                            <td class="NameTD">
                                <Label id="lblShareId" name="lblShareId" class="col-form-label text-right" style="width:90px;">
                                    分享
                                </Label>
                            </td>
                            <td class="ValueTD" colspan="3">
                                <select id="ddlShareId" name="ddlShareId" class="form-control" style="width:200px;" />

                            </td>

                        </tr>
                        @*<tr>
                                <td class="NameTD">
                                    <Label id="lblOperationTypeId" name="lblOperationTypeId" class="col-form-label text-right" style="width:90px;">
                                        操作类型ID
                                    </Label>
                                </td>
                                <td class="ValueTD">
                                    <select id="ddlOperationTypeId" name="ddlOperationTypeId" class="form-control" style="width:200px;" />
                                </td>

                            </tr>*@
                        <tr>
                            <td class="NameTD">
                                <Label id="lblMemo" name="lblMemo" class="col-form-label text-right" style="width:90px;">
                                    备注
                                </Label>
                            </td>
                            <td class="ValueTD">
                                <textarea id="txtMemo" name="txtMemo" class="form-control" style="width:350px;height:75px;"></textarea>
                                @*<input id="txtMemo" name="txtMemo" class="form-control" style="width:200px;" />*@
                            </td>

                        </tr>
                    </table>
                </div>
                <div style="text-align:center;width:100%;">
                    <a href="javascript:history.back(-1)" class="btn btn-default btn-sm">关闭</a>
                    @*<button id="btnCancel" type="button" class="btn btn-default btn-sm" data-dismiss="modal" onclick="">关闭</button>*@
                    <button id="btnOKUpd" type="button" class="btn btn-primary btn-sm" onclick="mySubmit()">添加</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal -->
    </div>
</div>

<input id="hidOpType" type="hidden" />
<input id="hidKeyId" type="hidden" />
@*<input id="hidUserId" type="hidden" value="@Model.seUserId" />*@
@*<input id="hidUserId1" type="hidden" value="@strUserId1_Value" />*@
<input id="hidCurrPageIndex" type="hidden" value="1" />
<input id="hidSortvPaperReadWriteBy" type="hidden" value="" />

<input id="hidReadWriteTypeId" type="hidden" />

<input id="hidUserId" type="hidden" />

<input id="hidPaperId" type="hidden" />
<input id="hidPaperRWId" type="hidden" />
@*<input id="hidUserInfo" type="hidden" value="@Model.GetSession("objvUserRoleRelation")" />*@
