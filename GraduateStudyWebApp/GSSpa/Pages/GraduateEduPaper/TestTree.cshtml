@page
@{
    Layout = null;
    ViewData["Title"] = "测试树";
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Layui</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    @*<link rel="stylesheet" href="//res.layui.com/layui/dist/css/layui.css" media="all">*@
    @*<link rel="stylesheet" type="text/css" href="~/layui/css/layui.css">*@
    <!-- 注意：如果你直接复制所有代码到本地，上述css路径需要改成你本地的 -->

    <link rel="stylesheet" type="text/css" href="../css/SimpleTree.css">
    <link rel="stylesheet" href="~/css/public.css" />
    <link rel="stylesheet" href="../lib/bootstrap/dist/css/bootstrap.css" />

    <script type="text/javascript" src="../lib/jquery-1.6.min.js"></script>

    <script src="~/lib/Xadmin/lib/layui/layui.js" charset="utf-8"></script>
    <script type="text/javascript" src="~/lib/Xadmin/js/xadmin.js"></script>
    <script src="~/lib/zoomify/zooming.js"></script>
    <script src="~/lib/require/require.js" data-main="../js/src/config"></script>
    <script>
////所有用户自定义的JS函数建议都放在这里
//    function GetRequest() {
//        var url = location.search; //获取url中"?"符后的字串
//        var theRequest = new Object();
//        if (url.indexOf("?") != -1) {
//            var str = url.substr(1);
//            strs = str.split("&");
//            for (var i = 0; i < strs.length; i++) {
//                theRequest[strs[i].split("=")[0]] = unescape(strs[i].split("=")[1]);
//            }
//        }
//        return theRequest;
//    }
//    function GetParagraphByPaperID() {
//        var Request = new Object();
//        Request = GetRequest();
//        var str1;
//        str1 = Request['PaperId'];

//        if (str1 != null) {
//            $('#hidPaperId').val(str1);

//            require(["../js/GraduateEduPaper/gs_PaperParagraph.js"], function (section) {
//                var objPage = new section.gs_PaperParagraph();
//                objPage.Page_Load();
//            });

//        }
//        else {
//            require(["../js/GraduateEduPaper/gs_PaperParagraph.js"], function (section) {
//                var objPage = new section.gs_PaperParagraph();
//                objPage.Page_Load();
//            });
//        }
//    }


//    /*
//  页面导入-在导入页面后运行的函数
// (AutoGCLib.WA_ViewScript_TS4CSharp:Gen_WApi_JS_Page_Load)
// */
//    window.onload = function () {
//        GetParagraphByPaperID();
//    }


        //点击树菜单事件；
        function btnSelectResearchTopic(strKeyId, strName,levelId) {

         //   $("#divLoading").show();
            //先清除背景色
            //  $("#TreeBind li a").removeClass("selected");
            $("#container li a").removeClass("selected");
            //$("#divContent_menu").show();
            if (levelId == "1") {
                //添加背景色
                $("#" + strKeyId).addClass("selected");
            }
            else {
                //添加背景色
                $("#" + strKeyId + " a").addClass("selected");
            }


            //存储点击的id
            $("#hidTopicRelaId").val(strKeyId);
            $("#hidTopicName").val(strName);
            //alert(strKeyId);
            //点击后调整关系表数据方法；
            //require(["../js/GraduateEduTopic/ResearchTopicListEx.js"], function (researchtopic) {
            //    var objPage = new researchtopic.ResearchTopicListEx();
            //    objPage.GetAllFunctionMethod();
            //});
        }
        //点击树菜单事件；
        function btnSelect(strKeyId, strName) {

            //   $("#divLoading").show();

            //$("#divContent_menu").show();

            $("#container li a").removeClass("selected");


            //添加背景色
            $("#" + strKeyId + " span a").addClass("selected");
            //存储点击的id
            $("#hidTopicRelaId").val(strKeyId);
            $("#hidTopicName").val(strName);
            //alert(strKeyId);
            //点击后调整关系表数据方法；
            //require(["../js/GraduateEduTopic/ResearchTopicListEx.js"], function (researchtopic) {
            //    var objPage = new researchtopic.ResearchTopicListEx();
            //    objPage.GetAllFunctionMethod();
            //});
        }

    </script>

    <style type="text/css">
        ul > li {
            list-style: none;
        }
        /* 可展开*/
        .switch-open {
            margin-left: -12px;
            border: 6px solid transparent;
            display: inline-block;
            width: 0px;
            height: 0px;
            border-top-color: black;
        }
        /* 展开完毕*/
        .switch-close {
            margin-left: -12px;
            border: 6px solid transparent;
            display: inline-block;
            width: 0px;
            height: 0px;
            border-left-color: black;
            margin-bottom: 2px;
        }
        /* 改变CheckBox样式*/
        input[type='checkbox'] {
            width: 20px;
            height: 20px;
            -webkit-appearance: none;
            -moz-appearance: none;
            border: 1px solid #c9c9c9;
            border-radius: 3px;
            outline: none;
            color: white;
            text-align: center;
        }

            input[type='checkbox']:before {
                content: '√ ';
                color: transparent;
            }

        input[type=checkbox]:checked {
            background-color: #30add6;
        }

            input[type=checkbox]:checked:before {
                content: '√';
                color: white;
                font-weight: bold;
            }
    </style>
</head>
<body>
    @*<div class="warp">
            <ul id="container"></ul>
        </div>*@

    <div class="warp">
        <ul id="container">
            <li >
                <span>
                    <span class="switch-open" onclick="toggle(this)"></span>
                    <a id="001" onclick="btnSelectResearchTopic('001', ' 0-0','1')" href="#" class="selected"> 0-0</a>
                </span>
                <ul class="submenu" id="TreeBind">
                    <li id="00000014" onclick="btnSelectResearchTopic('00000014', '泰泽教育内部测试', '2')"><a href="#" class="selected">泰泽教育内部测试</a></li>
                <li id="00000024" onclick="btnSelectResearchTopic('00000024', '研究生论文阅读系统', '2')"><a href="#">研究生论文阅读系统</a></li>
                <li id="00000025" onclick="btnSelectResearchTopic('00000025', '年地平线报告', '2')"><a href="#">2020年地平线报告</a></li>
                <li id="00000026" onclick="btnSelectResearchTopic('00000026', 'lyltest', '2')"><a href="#">lyltest</a></li>
                <li id="00000027" onclick="btnSelectResearchTopic('00000027', '自适应学习技术与个性化学习', '2')"><a href="#">自适应学习技术与个性化学习</a></li>
                </ul>
            </li>
            <li>
                <span>
                    <span class="switch-open" onclick="toggle(this)"></span>
                    0-1
                </span>
                <ul>
                    <li>0-1-0</li>
                    <li>

                        0-1-1
                    </li>
                </ul>
            </li>
            <li> 0-2</li>
        </ul>



        @*<ul id="container">
                <li>
                    <span>
                        <span class="switch-open" onclick="toggle(this)"></span>
                        0-0
                    </span><ul>
                        <li>
                            0-0-0
                        </li>
                        <li>
                            <span>
                                <span class="switch-open" onclick="toggle(this)"></span>
                                0-0-1
                            </span><ul>
                                <li> <input type="checkbox">0-0-1-0</li>
                                <li>
                                    0-0-1-1
                                </li>
                                <li> <input type="checkbox">0-0-1-2</li>
                            </ul>
                        </li>
                        <li>
                            0-0-2
                        </li>
                    </ul>
                </li>
                <li>
                    <span>
                        <span class="switch-open" onclick="toggle(this)"></span>
                        0-1
                    </span><ul>
                        <li>0-1-0</li>
                        <li>

                            0-1-1
                        </li>
                    </ul>
                </li>
                <li> 0-2</li>
            </ul>*@
    </div>
    <script type="text/javascript">

    //结构
    var json={
        '0-0':{
            '0-0-0':null,
            '0-0-1':{
                '0-0-1-0':null,
                '0-0-1-1':null,
                '0-0-1-2':null
            },
            '0-0-2':null
        },
        '0-1':{
            '0-1-0':null,
            '0-1-1':null
        },
        '0-2':null
    };

//这里生成DOM
    //function generate(json,par)
    //{
    //    for(var attr in json)
    //    {
    //        var ele=document.createElement('li');
    //        if(!json[attr])
    //            ele.innerHTML=' <input type="checkbox"></input>'+attr;
    //        else
    //        {
    //            ele.innerHTML='<span><span class="switch-open" onclick="toggle(this)"></span><input type="checkbox" onclick="checkChange(this)"></input>'+attr+'</span>';
    //            var nextpar=document.createElement('ul');
    //            ele.appendChild(nextpar);
    //            generate(json[attr],nextpar);
    //        }
    //        par.appendChild(ele);
    //    }
    //}
    //generate(json,document.getElementById('container'));

    //处理展开和收起
function toggle(eve)
{
    var par=eve.parentNode.nextElementSibling;
    if(par.style.display=='none')
    {
        par.style.display='block';
        eve.className='switch-open';

    }
    else
    {
        par.style.display='none';
        eve.className='switch-close';
    }
}

////处理全部勾选和全部不选
//    function checkChange(eve)
//    {
//        var oul=eve.parentNode.nextElementSibling;
//        if(eve.checked)
//        {
//                for(var i=0;i<oul.querySelectorAll('input').length;i++)
//                {
//                    oul.querySelectorAll('input')[i].checked=true;
//                }
//        }
//        else
//        {
//            for(var i=0;i<oul.querySelectorAll('input').length;i++)
//            {
//                oul.querySelectorAll('input')[i].checked=false;
//            }
//        }
//    }
//处理全部勾选和全部不选
//    function checkChange(eve)
//    {
//        var oul=eve.parentNode.nextElementSibling;
//        if(eve.checked)
//        {
//                for(var i=0;i<oul.querySelectorAll('input').length;i++)
//                {
//                    oul.querySelectorAll('input')[i].checked=true;
//                }
//        }
//        else
//        {
//            for(var i=0;i<oul.querySelectorAll('input').length;i++)
//            {
//                oul.querySelectorAll('input')[i].checked=false;
//            }
//        }
//    }
    </script>



</body>

</html>
