@page
@{
    Layout = "~/Pages/Shared/_Layout_PC.cshtml";
    ViewData["Title"] = "申请加入主题";
}
@section Styles{


    <link rel="stylesheet" href="../lib/bootstrap/dist/css/bootstrap.css" />
    <link rel="stylesheet" href="../css/site.css" />

    <link rel="stylesheet" href="~/lib/Xadmin/css/font.css">
    <link rel="stylesheet" href="~/lib/Xadmin/css/xadmin.css">
    <!-- <link rel="stylesheet" href="./css/theme5.css"> -->


    <link rel="stylesheet" href="~/css/public.css" />
    <style>
        .artlist li {
            line-height: 40px;
            height:40px;
        }
    </style>

}
@section Scripts{

    <script src="../lib/jquery/dist/jquery.js"></script>
    <script src="~/lib/Xadmin/lib/layui/layui.js" charset="utf-8"></script>
    <script type="text/javascript" src="~/lib/Xadmin/js/xadmin.js"></script>

    <script src="../lib/bootstrap/dist/js/bootstrap.js"></script>
    <script>
        layui.use(['laydate', 'form'],
            function () {
                var laydate = layui.laydate;

                //执行一个laydate实例
                laydate.render({
                    elem: '#txtStartDate_q' //指定元素
                });

                //执行一个laydate实例
                laydate.render({
                    elem: '#txtEndDate_q' //指定元素
                });
            });
    </script>
    <script src="../lib/require/require.js" data-main="../js/src/config"></script>

}
<script>





    window.onload = function () {
        require(["../js/GraduateEduTopic/ApplyTopic.js"], function (applytopic) {
            var objPage = new applytopic.ApplyTopic();
            objPage.Page_Load();
        });

    }

    /*
     查询记录
    (AutoGCLib.WA_ViewScript_TS4CSharp:Gen_WApi_JS_btnQuery_Click)
    */
    function btnQuery_Click() {
        require(["../js/GraduateEduTopic/ApplyTopic.js"], function (applytopic) {
            $("#Text1").val("进入函数：btnQuery_Click");
            var objPage = new applytopic.ApplyTopic();
            objPage.btnQuery_Click();
        });
    }

    //申请加入主题
    function btnApplyTopic_Click(TopicId, UpdUser) {
        require(["../js/GraduateEduTopic/ApplyTopic.js"], function (applytopic) {

            var objPage = new applytopic.ApplyTopic();
            objPage.btnApplyTopic_Click(TopicId, UpdUser);
        });
    }


    function CloseWindow() {

        try {
            //var strpaperId = $("#hidRequestPaperId").val();
            //if (strpaperId != "") {
            //    window.parent.CloseWindow();
            //}
            //else {
            var index = parent.layer.getFrameIndex(window.name); //先得到当前iframe层的索引
            parent.layer.close(index); //再执行关闭

            window.parent.liConceptClick();
            //}

        } catch (e) {
            window.opener.location = "父页面地址";
            window.opener = null;

            window.close();
        }
    }

    //信息提示
    function Alert1(strMsg) {

        layer.msg(strMsg, {
            icon: 1,
            time: 2000
        });
    }

    function Alert2(strMsg) {

        layer.msg(strMsg, {
            icon: 2,
            time: 2000
        });
    }

    function Alert3(strMsg) {

        layer.msg(strMsg, {
            icon: 3,
            time: 2000
        });
    }
    function Alert4(strMsg) {

        layer.msg(strMsg, {
            icon: 4,
            time: 2000
        });
    }


    /*
    同意
   */
    function btn_OK_Click(RequestId, TopicId, RequestUser) {
        require(["../js/GraduateEduTopic/ApplyTopic.js"], function (applytopic) {
            var objPage = new applytopic.ApplyTopic();
            objPage.btn_OK_Click(RequestId, TopicId, RequestUser);
        });
    }

    /*
    拒绝
   */
    function btn_NO_Click(strKey) {
        require(["../js/GraduateEduTopic/ApplyTopic.js"], function (applytopic) {
            var objPage = new applytopic.ApplyTopic();
            objPage.btn_NO_Click(strKey);
        });
    }

    /*历史请求*/
    function history_Request_Click() {
        require(["../js/GraduateEduTopic/ApplyTopic.js"], function (applytopic) {
            var objPage = new applytopic.ApplyTopic();
            objPage.history_Request_Click();
        });
    }

    /*历史通知*/
    function history_Notice_Click() {
        require(["../js/GraduateEduTopic/ApplyTopic.js"], function (applytopic) {
            var objPage = new applytopic.ApplyTopic();
            objPage.history_Notice_Click();
        });
    }

</script>


<div id="divLoading" class="loading">
    <img src="~/images/CirclePoint.gif" />
</div>

<div id="tabLayout">
    @*-- 标题层 --*@
    <div class="x-nav">
        <span class="layui-breadcrumb">
            <a href="">首页</a>
            <a href="">主题研究</a>
            <a>
                <cite>申请加入主题</cite>
            </a>
            <Label id="lblMsg_List" name="lblMsg_List"></Label>
        </span>
        <a class="layui-btn layui-btn-small" style="line-height:1.6em;margin-top:3px;float:right" onclick="location.reload()" title="刷新">
            <i class="layui-icon layui-icon-refresh" style="line-height:30px"></i>
        </a>

    </div>


    <div id="divQuery" class="div_query">

        <table id="tabQuery" name="tabQuery" style="width: 10%; " class="table table-bordered table-hover table td table-sm">
            <tr>
                <td>
                    <input id="txtTopicName_q" name="txtTopicName_q" placeholder="主题名称" class="layui-input" style="width:300px;" />
                </td>

                <td>
                    <input id="txtTopicProposePeople_q" name="txtTopicProposePeople_q" placeholder="主题负责人" class="layui-input" style="width:200px;" />
                </td>

                <td>
                    <input class="layui-input" placeholder="起始日期" name="txtStartDate_q" id="txtStartDate_q" style="width:150px;">
                </td>
                <td>
                    <input class="layui-input" placeholder="结束日期" name="txtEndDate_q" id="txtEndDate_q" style="width:150px;">
                </td>


                <td>
                    <button class="layui-btn" lay-submit="" lay-filter="sreach" onclick="btnQuery_Click()">
                        <i class="layui-icon">&#xe615;</i>
                    </button>
                </td>
            </tr>

        </table>
    </div>

    <ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a class="nav-link active" data-toggle="tab" href="#home">研究主题</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href="#menu1">请求通知 <span class="layui-badge" id="RequestPushCount">0</span></a>
        </li>

    </ul>

    <!-- Tab panes -->
    <div class="tab-content">

        <div id="home" class="tab-pane active">
            <div class="layui-card">
                <div class="layui-card-body ">
                    <table class="layui-table layui-form">
                        <thead>
                            <tr>
                                <th width="250">主题</th>
                                <td width="450">介绍</td>
                                <th width="150">负责人</th>
                                <th width="150">成员数</th>
                                <th width="200">教学班</th>
                                <th width="150">申请加入</th>
                            </tr>
                        </thead>
                        <tbody id="tbApplyTopicList" class="x-cate"></tbody>
                    </table>
                </div>
            </div>
        </div>
        <div id="menu1" class="tab-pane fade">
            <div class="layui-card">
                <div class="layui-card-body ">
                    <div class="layui-collapse" lay-accordion>
                        <div class="layui-colla-item">
                            <h2 class="layui-colla-title">我的请求<span class="layui-badge" id="requestCount">0</span></h2>
                            @*<div id="divtab1" class="layui-colla-content layui-show">*@
                            <div id="divtab1" class="layui-colla-content">

                                <ul class="nav nav-pills" role="tablist">
                                    <li class="nav-item">
                                        <a class="nav-link active" data-toggle="pill" href="#Request">现有请求</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" data-toggle="pill" href="#history_Request" onclick="history_Request_Click()">历史请求</a>
                                    </li>
                                </ul>

                                <!-- Tab panes -->
                                <div class="tab-content">
                                    <div id="Request" class="tab-pane active">

                                    </div>
                                    <div id="history_Request" class="tab-pane fade">

                                    </div>

                                </div>

                            </div>
                        </div>
                        <div class="layui-colla-item">
                            <h2 class="layui-colla-title">通知<span class="layui-badge" id="noticeCount">0</span></h2>

                            <div id="divtab2" class="layui-colla-content layui-show">
                                <ul class="nav nav-pills" role="tablist">
                                    <li class="nav-item">
                                        <a class="nav-link active" data-toggle="pill" href="#Notice">现有通知</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" data-toggle="pill" href="#history_Notice" onclick="history_Notice_Click()">历史通知</a>
                                    </li>
                                </ul>

                                <!-- Tab panes -->
                                <div class="tab-content">
                                    <div id="Notice" class="tab-pane active">

                                    </div>
                                    <div id="history_Notice" class="tab-pane fade">

                                    </div>

                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

        </div>

    </div>

</div>

<script>
    layui.use(['form'], function () {
        form = layui.form;

    });



            // 分类展开收起的分类的逻辑
            //


</script>
<input id="hidOpType" type="hidden" />
<input id="hidKeyId" type="hidden" />
<input id="hidUserId" type="hidden" />
<input id="hidCurrPageIndex" type="hidden" value="1" />
<input id="hidSortBy" type="hidden" value="" />
<input id="hidPaperRWId" type="hidden" />
<input id="hidQueryStata" type="hidden" />

@* 被邀请数 *@
<input id="hidRequestPushCount" type="hidden" />